<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="#{admin.report.title}">Library Report Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light d-flex flex-column min-vh-100">
<div th:replace="fragments/nav :: nav"></div>

<main class="container my-5 flex-grow-1">
    <h2 class="text-center mb-4" th:text="#{admin.report.title}">Library Report Dashboard</h2>

    <div class="row g-4 text-center">
        <div class="col-md-4">
            <div class="card shadow-sm">
                <div class="card-body">
                    <h5 class="card-title" th:text="#{admin.report.totalBooks}">Total Books</h5>
                    <p class="card-text fs-4" th:text="${totalBooks}">0</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card shadow-sm">
                <div class="card-body">
                    <h5 class="card-title" th:text="#{admin.report.totalCopies}">Total Copies</h5>
                    <p class="card-text fs-4" th:text="${totalCopies}">0</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card shadow-sm">
                <div class="card-body">
                    <h5 class="card-title" th:text="#{admin.report.issuedCopies}">Borrowed Books</h5>
                    <p class="card-text fs-4" th:text="${issuedCopies}">0</p>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card shadow-sm">
                <div class="card-body">
                    <h5 class="card-title" th:text="#{admin.report.completedOrders}">Completed Orders</h5>
                    <p class="card-text fs-4" th:text="${completedOrders}">0</p>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card shadow-sm">
                <div class="card-body">
                    <h5 class="card-title" th:text="#{admin.report.activeUsers}">Active Users</h5>
                    <p class="card-text fs-4" th:text="${activeUsers}">0</p>
                </div>
            </div>
        </div>
    </div>

    <h4 class="text-center mt-5" th:text="#{admin.report.topBooks}">Top Requested Books</h4>
    <table class="table table-bordered mt-3">
        <thead class="table-light">
        <tr>
            <th>#</th>
            <th th:text="#{global.title}">Title</th>
            <th th:text="#{global.author}">Author</th>
            <th th:text="#{admin.report.table.requests}">Requests</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="book, iterStat : ${topBooks}">
            <td th:text="${iterStat.count}">1</td>
            <td th:text="${book.title}">Book Title</td>
            <td th:text="${book.authorFullName}">Author Full Name</td>
            <td th:text="${book.requestCount}">10</td>
        </tr>
        </tbody>
    </table>

    <h4 class="text-center mt-5" th:text="#{admin.report.topUsers}">Top Active Users</h4>
    <table class="table table-bordered mt-3">
        <thead class="table-light">
        <tr>
            <th>#</th>
            <th th:text="#{login.username}">Username</th>
            <th th:text="#{admin.report.table.orderCount}">Number of Orders</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="user, iterStat : ${topUsers}">
            <td th:text="${iterStat.count}">1</td>
            <td th:text="${user.username}">username</td>
            <td th:text="${user.requestCount}">5</td>
        </tr>
        </tbody>
    </table>

</main>

<div th:replace="fragments/footer :: footer"></div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
